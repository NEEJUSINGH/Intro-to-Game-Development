<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lesson 6 – Add Bullets</title>
  <style>
    :root{ --bg1:#070b16; --bg2:#0a0f1e; --ink:#e6f0ff; --accent:#00eaff; --panel:#0b1226; --edge:#152042 }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; color:var(--ink); background:linear-gradient(to bottom,var(--bg1),var(--bg2));}
    .wrap{max-width:980px; margin:auto; padding:24px}
    h1{margin:0 0 8px; font-size:clamp(26px,3.2vw,42px); color:var(--accent); text-align:center}
    .card{background:var(--panel); border:1px solid var(--edge); border-radius:14px; padding:16px; margin:0 0 16px}
    .tip{background:#0e1730; border:1px solid #22356f; border-left:6px solid var(--accent); border-radius:10px; padding:12px 14px; margin:16px 0}
    .hud{display:flex; justify-content:space-between; align-items:center; gap:12px; margin:8px 0}
    .btn{appearance:none; border:1px solid #1a2b59; background:#0b1226; color:var(--ink); padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700}
    .btn:hover{filter:brightness(1.15)}
    canvas{display:block; width:100%; height:auto; border:1px solid #16234a; border-radius:10px}
    .nav{display:flex; justify-content:space-between; gap:12px}
    a.btn{display:inline-block; text-decoration:none}
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card">
      <h1>Lesson 6: Add Bullets</h1>
      <p>Make your spaceship fire tiny rectangles (bullets) upward when you press <strong>Space</strong>. This page includes a minimal player and game loop so you can test right away.</p>
      <div class="tip"><strong>Goal:</strong> Press <strong>Space</strong> to shoot; bullets move up and disappear off-screen. We also add a small cooldown so holding Space is not a laser.
      <br><strong>Controls:</strong> ←/→ to move, Space to shoot.</div>
      <div class="hud"><button id="reset" class="btn">Reset</button></div>
      <canvas id="game" width="720" height="480" aria-label="Game canvas"></canvas>
    </section>

    <section class="card nav">
      <a class="btn" href="lesson5.html">← Back to Lesson 5</a>
      <a class="btn" href="lesson7.html">Continue to Lesson 7 →</a>
    </section>
  </main>

  <script>
  "use strict";
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const resetBtn = document.getElementById('reset');

  let running = true, lastTime = 0;

  // --- Player (from Lessons 4–5) ---
  const player = { x: canvas.width/2 - 20, y: canvas.height - 60, w: 40, h: 20, speed: 4 };
  const input = { left:false, right:false, fire:false };
  addEventListener('keydown', e=>{ if(e.code==='ArrowLeft')input.left=true; if(e.code==='ArrowRight')input.right=true; if(e.code==='Space'){input.fire=true; e.preventDefault();}});
  addEventListener('keyup',   e=>{ if(e.code==='ArrowLeft')input.left=false; if(e.code==='ArrowRight')input.right=false; if(e.code==='Space'){input.fire=false; e.preventDefault();}});
  function updatePlayer(){ if(input.left) player.x-=player.speed; if(input.right) player.x+=player.speed; const pad=10; if(player.x<pad)player.x=pad; if(player.x+player.w>canvas.width-pad)player.x=canvas.width-pad-player.w; }
  function drawPlayer(){ ctx.save(); ctx.fillStyle='#9ab4ff'; ctx.fillRect(player.x,player.y,player.w,player.h); ctx.fillStyle='#cfe1ff'; ctx.beginPath(); ctx.moveTo(player.x+player.w/2, player.y-6); ctx.lineTo(player.x+player.w/2-6, player.y); ctx.lineTo(player.x+player.w/2+6, player.y); ctx.closePath(); ctx.fill(); ctx.restore(); }

  // --- Bullets (new) ---
  let bullets=[]; const BULLET_SPEED=-6, BULLET_W=4, BULLET_H=10, FIRE_COOLDOWN_MS=250; let lastShotAt=0;
  function tryFireBullet(now){ if(!input.fire) return; if(now-lastShotAt<FIRE_COOLDOWN_MS) return; const bx=player.x+player.w/2-BULLET_W/2, by=player.y-BULLET_H; bullets.push({x:bx,y:by,w:BULLET_W,h:BULLET_H,vy:BULLET_SPEED,active:true}); lastShotAt=now; }
  function updateBullets(){ for(const b of bullets){ if(!b.active) continue; b.y+=b.vy; if(b.y+b.h<0) b.active=false; } bullets=bullets.filter(b=>b.active); }
  function drawBullets(){ ctx.save(); ctx.fillStyle=(Math.floor(performance.now()/120)%2===0)?'#ffd369':'#ffe39a'; for(const b of bullets){ if(b.active) ctx.fillRect(b.x,b.y,b.w,b.h); } ctx.restore(); }

  // --- Loop ---
  function drawBG(){ ctx.fillStyle='#0a0f1e'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.save(); ctx.globalAlpha=.4; ctx.fillStyle='#cfe1ff'; for(let i=0;i<60;i++){ const x=(i*97+Math.floor(performance.now()/10))%canvas.width; const y=(i*53+i*7)%canvas.height; ctx.fillRect(x,y,1,1);} ctx.restore(); }
  function update(now){ updatePlayer(); tryFireBullet(now); updateBullets(); }
  function draw(){ drawBG(); drawPlayer(); drawBullets(); }
  function loop(now){ if(!running) return; lastTime=now; update(now); draw(); requestAnimationFrame(loop); }

  function reset(){ player.x=canvas.width/2-player.w/2; player.y=canvas.height-60; bullets=[]; lastShotAt=0; if(!running){ running=true; requestAnimationFrame(loop);} }
  resetBtn.addEventListener('click', reset);
  reset(); requestAnimationFrame(loop);
  </script>
</body>
</html>








